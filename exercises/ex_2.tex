% PROBLEM 2
\begin{problem}
    Let $A$ be a ring.
    Let $a_i\in A$ and $f = a_0 + a_1 T + \cdots + a_n T^n \in A[T]$ be a polynomial.
    Prove:
    \begin{enumerate}[label=(\theproblem.\arabic*),ref=\theproblem.\arabic*]

        % PROBLEM 2.1
        \item \label{itm:coefficients_nilpotent}
        $f$ is a unit in $A[T] \iff a_0$ is a unit in $A$ and $a_1, \ldots, a_n$ are nilpotent.
            \begin{sol}
                \begin{proof}
                    We will show both implications separately.
                    \begin{itemize}
                        \item[$(\Leftarrow)$]
                        Let $a_i^{n_i} = 0$ for all $1 \leq i \leq n$.
                        Consider s = $\varSigma_{i=1}^{n} n_i$.
                        Let h = $-a_1 T - \cdots - a_n T^n$ be the negative of the polynomial without the constant term.
                        Then,
                            \begin{align*}
                                h^s = \left(- \sum_{i=1}^{n} a_i T^i \right)^s = (-1)^s \sum_{j_1 + \cdots + j_n = s} a_1^{j_1} \cdots a_n^{j_n} T^{j_1 + 2 \cdot j_2 \cdots + n \cdot j_n}
                            \end{align*}
                        By the pigeonhole principle, in each term of the sum, there is at least one $j_k \geq n_k$ so $a_k^{j_k} = 0$, and thus $h^s = 0$.
                        Then, h is nilpotent, so is $a_0^{-1} \cdot h$ and, by~\ref{itm:1_minus_x_invertible}, $1 - a_0^{-1} \cdot h$ is invertible.
                        Multiplying by $a_0$, we get that $f = a_0 - h$ is also invertible.
                        \item[$(\Rightarrow)$]
                        Suppose, there exists $g = b_0 + b_1 T + \cdots + b_m T^m \in A[T]$ such that $1 = fg = \sum_{i=0}^{n+m} s_i T^i$,
                        where $s_i =  \sum_{j=0}^{n} a_j b_{i-j}$ and $b_k = 0$ for $k>m$ or $k < 0$.
                        We first note that $1 = s_0 = a_0 b_0 \Rightarrow a_0, b_0 \in A^*$.
                        Next, suppose $n > 0$ (Otherwise, there is nothing to show).
                        \begin{claim}
                            Let $0 \leq k \leq m$. $a_n^{k + 1} b_{m-k} = 0$
                            \begin{proof}
                                By total induction on $k$:
                                \begin{itemize}
                                    \item If $k = 0$, then $0 = s_{n+m} = a_n b_m = (a_n)^{0+1}b_{m-0}$.
                                    \item Suppose that the statement is true for $0, \ldots, k-1$.
                                    Then, $s_{n+m-k} = 0$ as $n+m-k \geq n > 0$.
                                    Therefore:
                                        \begin{align*}
                                            0 = a_n^k s_{n+m-k} = \sum_{j=0}^{n} a_n^k a_j b_{n+m-k-j} = a_n^{k+1} b_{m-k} + \sum_{j=0}^{n-1} a_n^k a_j b_{n+m-k-j}
                                        \end{align*}

                                    Now, the terms in the sum are zero by the inductive hypothesis, as $j < n \Rightarrow -(n-k-j) < k \Rightarrow (n-k-j)+1 \leq k$.
                                    Therefore, $a_n^{k+1} b_{m-k} = 0$ as we wanted to show.
                                \end{itemize}
                            \end{proof}
                        \end{claim}
                        Now, by setting $k = m$, we get that $a_n^{m+1} b_0 = 0$.
                        Since $b_0$ is a unit, $a_n^{m+1} = 0$ and $a_n$ is nilpotent.
                        We are almost done if we realize the following:
                        \begin{claim}
                            Let $p = c_0 + c_1 T + \cdots + c_l T^l \in A[T]$ be an invertible polynomial such that $c_l$ is nilpotent.
                            Then, $q = c_0 + c_1 T + \cdots + c_{l-1} T^{l-1}$ is also invertible.
                            \begin{proof}
                                Note that $c_l T^l$ is nilpotent and so is $c_l T^l p^{-1}$.
                                Then, $1 - c_l T^l p^{-1}$ is invertible by~\ref{itm:1_minus_x_invertible}.
                                Finally, because $p$ is invertible, so is $q = p - c_l T^l = p (1 - c_l T^l p^{-1})$.
                            \end{proof}
                        \end{claim}
                        We will prove that for $0 < k \leq n$, $a_0 + \cdots + a_k T^k$ is invertible and $a_k$ is nilpotent by (reverse) induction on $k$.
                        \begin{itemize}
                            \item $a_n$ has already been done.
                            \item If $0 < k < n$, by hypothesis $a_{k+1}$ is nilpotent and $a_0 + \cdots + a_{k+1} T^{k+1}$ is invertible.
                            Then, $a_0 + \cdots + a_k T^k = (a_0 + \cdots + a_{k+1} T^{k+1}) - a_{k+1} T^{k+1}$ is invertible by the claim.
                            Therefore, $a_k$ is nilpotent.
                        \end{itemize}
                        \item[$(\Rightarrow)$]
                        (Faster Version) Let $f$ be a unit in $A[T]$.
                        \begin{claim}
                            Let $\mathfrak{p} \in Spec(A)$.
                            Then, $a_i \in \mathfrak{p}$ for all $i \in \{1, \ldots n\}$.
                            \begin{proof}
                                $\mathfrak{p} \in Spec(A)$ implies that $A/\mathfrak{p}$ is an integral domain.
                                Consider the reduction $\pi: A[T] \rightarrow A/\mathfrak{p}[T]$ that takes each element $a \in A[T]$ to the class $\overline{a} \in A/\mathfrak{p}[T]$.
                                Since $A/\mathfrak{p}$ is an integral domain,
                                \[
                                    0 = \deg \bar{1} = \deg \bar{f} \cdot \overline{f^{-1}} =
                                    \deg \bar{f} + \deg \overline{f^{-1}}
                                \]
                                In particular, $\deg \bar{f} = 0$ so, for all $i \in \{1, \ldots n\}$,
                                $\overline{a_i} = \bar{0} \Rightarrow a_i \in \mathfrak{p}$.
                            \end{proof}
                        \end{claim}
                        Since this holds for all $\mathfrak{p} \in Spec(A)$, we have that $ \forall i \in \{1, \ldots n\},
                        a_i \in \bigcap_{\mathfrak{p} \in Spec(A)}\mathfrak{p} = N(A)$ (by~\ref{itm:nilradical_is_intersection_of_all_primes}).
                        Finally, suppose that $f^{-1} = b_0 + b_1 T + \cdots + b_m T^m$.
                        Given that $f f^{-1}=1$ we have that $a_0 b_0 = 1$, and thus $a_0$ is invertible.
                    \end{itemize}
                \end{proof}
            \end{sol}

        % PROBLEM 2.2
        \item \label{itm:nilponent_implies_nilponent_coefficients} $f$ is nilpotent $\iff$ $a_0, \ldots, a_n$ are nilpotent.
            \begin{sol}
                \begin{proof}
                    We will show both implications separately.
                    \begin{itemize}
                        \item[$(\Leftarrow)$]
                        Just use the same argument as in the previous part of the exercise, but directly on $f$, not on $h = a_0-f$.
                        \item[$(\Rightarrow)$]
                        If $f$ is nilpotent, then $1 - f$ is invertible by~\ref{itm:1_minus_x_invertible}.
                        Thus, by the previous part, $-a_1, \ldots, -a_n$ are nilpotent.
                        Because $-a_i$ is nilpotent, $a_i$ is nilpotent.
                        We only have to prove that $a_0$ is nilpotent.
                        By the other implication, $h$ is nilpotent.
                        Then, by~\ref{itm:nilradical_is_ideal}, $a_0 = f + h$ is nilpotent.
                    \end{itemize}
                \end{proof}
            \end{sol}
        \item $f$ is a zero divisor $\iff$ there exists $a \in A$, $a \neq 0$ such that $af = 0$.
            \begin{sol}
                \begin{proof}
                    The backward implication is trivial because of the inclusion $A \subset A[T]$.
                    For the forward implication, suppose that $f$ is a zero divisor.
                    Then, there exists $g \in A[T]$, $g \neq 0$ such that $fg = 0$.
                    Let $g = b_0 + \cdots + b_m T^m$ be the minimum degree polynomial satisfying the condition $fg = 0$.
                    Suppose that $m > 0$.
                    \begin{claim}
                        $\exists i \in \{1, \ldots, n\}$ s.t. $a_i g \neq 0$
                        \begin{proof}
                            Suppose not.
                            Then, $a_i g = 0$ for all $i \in \{1, \dots, n\}$.
                            Then, $a_i b_m = 0$ for all $i \in \{1, \dots, n\}$.
                            But then we have $b_m f = 0$ with $b_m \in A$, in contradiction with g being a polynomial with minimum degree.
                        \end{proof}
                    \end{claim}
                    Take $i$ maximal such that $a_i g \neq 0$.
                    Then, $0 = f g = (a_0 + \dots + a_i T^i) (b_0 + \dots + b_m T^m) + \sum_{j=i+1}^n T^j a_j g = (a_0 + \dots + a_i T^i) (b_0 + \dots + b_m T^m)$, and $a_i b_m = 0$.
                    Thus, we have a polynomial $g' = a_i g \neq 0$ with degree $m-1$ satisfying $f (a_i g) = a_i (f g) = 0$, in contradiction with $g$ being of minimal degree.
                \end{proof}
            \end{sol}
    \end{enumerate}
\end{problem}